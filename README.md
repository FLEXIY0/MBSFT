# MBSFT — Minecraft Beta Server For Termux

Мульти-сервер менеджер для Minecraft Beta 1.7.3 на Android через Termux. Создавай сколько угодно серверов, каждый в своей папке, и управляй ими из одного меню.

Интерфейс на `dialog` — полноценные TUI-меню, работает даже через `curl | bash`.

## Возможности

- **Мульти-сервер** — неограниченное кол-во серверов, каждый со своим именем, портом и настройками
- **Dialog UI** — удобные меню, ввод, подтверждения прямо в терминале
- **Дашборд** — статус всех серверов в одном месте
- **Автоподбор порта** — 25565, 25566, 25567... без конфликтов
- **Быстрое создание** — ввёл имя → скачалось ядро → настроилось → готово
- **Сервисы** — автозапуск + автосохранение каждые 10 мин
- **SSH** — управление сервером с ПК

## Структура

```
~/mbsft-servers/
├── survival/              # сервер "survival"
│   ├── .mbsft.conf        # конфиг (RAM, порт, ядро)
│   ├── server.jar
│   ├── start.sh
│   ├── server.properties
│   └── ...
├── creative/              # сервер "creative"
│   └── ...
└── pvp-arena/             # сервер "pvp-arena"
    └── ...
```

## Требования

- Android устройство
- [Termux](https://f-droid.org/packages/com.termux/) (через F-Droid, НЕ Google Play)
- Wi-Fi (для игры по локальной сети)

## Установка

Откройте Termux и выполните **одну команду**:

```bash
curl -sL https://raw.githubusercontent.com/FLEXIY0/MBSFT/main/install.sh | bash
```

**Скрипт автоматически:**
- Скачается в `~/install.sh`
- Запустится
- При каждом последующем запуске будет проверять обновления

> `curl` предустановлен в Termux. Если его нет:
> ```bash
> pkg install curl
> ```

### Альтернатива через wget

```bash
pkg install wget
wget https://raw.githubusercontent.com/FLEXIY0/MBSFT/main/install.sh
bash install.sh
```

### Повторный запуск и автообновление

После первой установки скрипт сохраняется в `~/install.sh`:

```bash
bash install.sh
```

**Автообновление:** При каждом запуске скрипт автоматически проверяет наличие новой версии на GitHub и обновляется при необходимости.

## Использование

### Быстрый старт

1. Запустить скрипт
2. **Установить зависимости** (первый пункт)
3. **Быстрое создание** → ввести имя, например `survival`
4. Готово. Управляй через **Мои серверы**

### Главное меню

```
┌─────────── MBSFT v2.3 ───────────┐
│ Java: OK | Серверов: 2 | Запущено: 1 │
│                                       │
│   Установить зависимости              │
│   Создать сервер (пошагово)           │
│   Быстрое создание                    │
│   Мои серверы [2 шт.]                 │
│   Дашборд                             │
│   Настроить SSH                       │
│   Выход                               │
└───────────────────────────────────┘
```

### Мои серверы

```
┌──────── Мои серверы ────────┐
│                                 │
│  survival    Порт:25565 RAM:1G [ЗАПУЩЕН]  │
│  creative    Порт:25566 RAM:512M [СТОП]   │
│                                 │
└─────────────────────────────┘
```

### Управление сервером

```
┌──── [РАБОТАЕТ] survival ────┐
│ RAM: 1G | Порт: 25565           │
│                                  │
│   Запустить                      │
│   Остановить                     │
│   Перезапустить                  │
│   Консоль (screen)               │
│   Настройки (RAM, порт)          │
│   Создать сервис (автосохр.)     │
│   Удалить сервер                 │
└──────────────────────────────┘
```

### Подключение к серверу

1. **Дашборд** покажет IP и порт каждого сервера
2. В Minecraft Beta 1.7.3 → Multiplayer → Direct Connect:
   ```
   192.168.1.42:25565
   ```
3. Оба устройства должны быть в одной Wi-Fi сети

### SSH (управление с ПК)

```bash
ssh -p 8022 <user>@<IP>
```

## Ядра

По умолчанию — **Project Poseidon** (Beta 1.7.3, исправления багов, поддержка плагинов).

Своё ядро: при создании сервера выбери "закину сам" и положи `server.jar` в папку сервера.

## Технические детали

- **Java:** OpenJDK 8 (автоматическая установка через [Termux-Java](https://github.com/MasterDevX/Termux-Java))
- **Автообновление:** Встроенная система проверки версий
- **Изоляция:** Каждый сервер в отдельной директории
- **Управление:** Dialog TUI + Screen sessions

## Решение проблем

| Проблема | Решение |
|----------|---------|
| `Java not found` | Перезапусти Termux, выбери "Установить зависимости" |
| Сервер не стартует | `cat ~/mbsft-servers/<имя>/eula.txt` — должно быть `eula=true` |
| Не подключается | Оба устройства в одной Wi-Fi? Порт правильный? |
| Конфликт портов | Каждый сервер должен быть на своём порту (авто-подбор это решает) |
| Мало RAM | Настройки сервера → поставь `512M` |
| Скрипт не обновляется | Проверь интернет-соединение, попробуй `rm ~/install.sh` и установи заново |

## Лицензия

MIT
